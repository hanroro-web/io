<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RORO LAW FIRM - Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #0f0f0f;
            color: #e5e5e5;
        }
        .sidebar-item.active {
            background-color: #c4a47c;
            color: #000;
        }
        .text-gold { color: #c4a47c; }
        .bg-gold { background-color: #c4a47c; }
        .border-gold { border-color: #c4a47c; }
        
        input, textarea, select {
            background-color: #1a1a1a;
            border: 1px solid #333;
            color: #fff;
            transition: all 0.2s ease;
        }
        input:focus, textarea:focus {
            border-color: #c4a47c;
            background-color: #222;
            outline: none;
        }

        .section-card {
            background-color: #121212;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem;
            border-radius: 0.75rem;
        }

        /* Success Animation */
        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); background-color: #ffffff; }
            100% { transform: scale(1); }
        }
        .btn-saved {
            animation: success-pulse 0.4s ease-out;
        }
    </style>
</head>
<body class="flex min-h-screen">

    <!-- Sidebar -->
    <aside class="w-64 bg-zinc-950 border-r border-white/10 flex flex-col">
        <div class="p-6 text-2xl font-black text-gold border-b border-white/10">
            RORO <span class="text-xs text-white font-light block">ADMIN PANEL</span>
        </div>
        <nav class="flex-1 p-4 space-y-2">
            <button onclick="switchTab('content')" id="tab-content" class="sidebar-item active w-full text-left px-4 py-3 rounded-lg transition flex items-center gap-3">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                메인 콘텐츠 관리
            </button>
            <button onclick="switchTab('consult')" id="tab-consult" class="sidebar-item w-full text-left px-4 py-3 rounded-lg transition flex items-center gap-3 hover:bg-white/5 text-gray-400">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                상담 신청 현황
            </button>
        </nav>
        <div class="p-4 border-t border-white/10">
            <button onclick="resetData()" class="w-full text-[10px] text-red-500/50 hover:text-red-500 transition py-2 text-left uppercase tracking-tighter">데이터 초기화 (테스트용)</button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto bg-black p-8">
        
        <!-- VIEW: Main Page Content -->
        <div id="view-content" class="tab-view space-y-8">
            <div class="flex justify-between items-end">
                <div>
                    <h1 class="text-3xl font-bold">메인 페이지 콘텐츠 관리</h1>
                    <p class="text-gray-500 mt-2 text-sm">브라우저 로컬스토리지에 모든 수정사항이 안전하게 보관됩니다.</p>
                </div>
                <button id="save-btn" onclick="saveMainContent()" class="bg-gold text-black px-6 py-2 rounded font-bold hover:bg-white transition flex items-center gap-2">
                    <span id="save-text">설정 저장</span>
                </button>
            </div>

            <div class="grid grid-cols-1 gap-8">
                
                <!-- Section 01: Hero -->
                <div class="section-card">
                    <h3 class="text-gold font-bold mb-4 flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-gold rounded-full"></span>
                        SECTION 01 - Hero
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-[10px] text-gray-500 mb-1 uppercase tracking-widest">Main Title Top</label>
                                <input type="text" id="hero-title-1" class="w-full p-3 rounded-lg text-sm">
                            </div>
                            <div>
                                <label class="block text-[10px] text-gray-500 mb-1 uppercase tracking-widest">Main Title Gold</label>
                                <input type="text" id="hero-title-2" class="w-full p-3 rounded-lg text-sm font-bold text-gold">
                            </div>
                            <div>
                                <label class="block text-[10px] text-gray-500 mb-1 uppercase tracking-widest">Description</label>
                                <textarea id="hero-desc" rows="2" class="w-full p-3 rounded-lg text-sm"></textarea>
                            </div>
                        </div>
                        <div>
                            <label class="block text-[10px] text-gray-500 mb-1 uppercase tracking-widest">Hero Image URL</label>
                            <input type="text" id="hero-img" class="w-full p-2 rounded text-xs mb-3" oninput="updateHeroPreview(this.value)">
                            <div class="w-full h-36 bg-zinc-800 rounded-lg overflow-hidden border border-white/5 relative">
                                <img id="preview-hero" src="" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 02: About -->
                <div class="section-card">
                    <h3 class="text-gold font-bold mb-4 flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-gold rounded-full"></span>
                        SECTION 02 - About Us
                    </h3>
                    <div class="space-y-4">
                        <div class="grid grid-cols-3 gap-4">
                            <input type="text" id="value-1" placeholder="가치 1" class="p-2 rounded text-sm text-center">
                            <input type="text" id="value-2" placeholder="가치 2" class="p-2 rounded text-sm text-center">
                            <input type="text" id="value-3" placeholder="가치 3" class="p-2 rounded text-sm text-center">
                        </div>
                        <textarea id="about-text" rows="3" class="w-full p-3 rounded-lg text-sm leading-relaxed" placeholder="회사 소개 문구를 입력하세요."></textarea>
                    </div>
                </div>

                <!-- Section 03: Experts -->
                <div class="section-card">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-gold font-bold flex items-center gap-2">
                            <span class="w-1.5 h-1.5 bg-gold rounded-full"></span>
                            SECTION 03 - Experts
                        </h3>
                        <button onclick="addLawyerRow()" class="text-[10px] text-gold border border-gold/30 px-3 py-1 rounded hover:bg-gold hover:text-black transition uppercase font-bold">Add Lawyer</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm" id="lawyer-table">
                            <tbody id="lawyer-list" class="divide-y divide-white/5">
                                <!-- JS Renders here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section 04: Services -->
                <div class="section-card">
                    <h3 class="text-gold font-bold mb-4 flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-gold rounded-full"></span>
                        SECTION 04 - Services
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" id="services-container">
                        <!-- JS Renders here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: Consultations -->
        <div id="view-consult" class="tab-view hidden">
            <h1 class="text-3xl font-bold mb-2">상담 신청 현황</h1>
            <p class="text-gray-500 mb-8 text-sm">현재 접수된 실시간 상담 리스트입니다.</p>
            <div class="bg-zinc-900 rounded-xl overflow-hidden border border-white/10">
                <table class="w-full text-left">
                    <thead class="bg-zinc-800 text-[10px] text-gray-500 uppercase tracking-widest">
                        <tr>
                            <th class="p-4">이름</th>
                            <th class="p-4">연락처</th>
                            <th class="p-4">상담 분야</th>
                            <th class="p-4">접수 상태</th>
                        </tr>
                    </thead>
                    <tbody id="consult-list-body" class="divide-y divide-white/5 text-sm text-gray-300">
                        <!-- Mock data for demo -->
                        <tr>
                            <td class="p-4 font-bold text-white">김철수</td>
                            <td class="p-4">010-1111-2222</td>
                            <td class="p-4 text-gold">형사 사건</td>
                            <td class="p-4"><span class="bg-zinc-800 px-2 py-1 rounded text-[10px]">대기 중</span></td>
                        </tr>
                        <tr>
                            <td class="p-4 font-bold text-white">이영희</td>
                            <td class="p-4">010-3333-4444</td>
                            <td class="p-4 text-gold">이혼/가사</td>
                            <td class="p-4"><span class="bg-zinc-800 px-2 py-1 rounded text-[10px]">대기 중</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // --- 초기 기본 데이터 (Initial Mock) ---
        const initialData = {
            hero: { 
                t1: "정의를 향한 굳건한 신념", 
                t2: "RORO LAW FIRM", 
                desc: "당신의 소중한 권리를 지키는 신뢰의 파트너가 되겠습니다.", 
                img: "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?auto=format&fit=crop&w=800&q=80" 
            },
            about: { 
                values: ["정직", "전문성", "승소"], 
                text: "법무법인 로로는 각 분야의 최고 전문가들이 모여 의뢰인의 사건을 가족의 일처럼 고민합니다." 
            },
            lawyers: [
                { id: 1, name: "홍길동", role: "대표 변호사", img: "https://images.unsplash.com/photo-1556157382-97dee2dcb341?auto=format&fit=crop&w=200&q=80" },
                { id: 2, name: "박소연", role: "파트너 변호사", img: "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?auto=format&fit=crop&w=200&q=80" }
            ],
            services: [
                { title: "형사 사건", desc: "강력범죄, 경제범죄 정밀 대응" },
                { title: "이혼/가사", desc: "재산분할 및 자녀 양육 상담" },
                { title: "민사/손배", desc: "부동산 및 손해배상 소송" },
                { title: "기업 법무", desc: "스타트업 자문 및 계약 대행" }
            ]
        };

        let mainData = {};

        // --- 로컬스토리지 제어 ---
        function init() {
            const saved = localStorage.getItem('roro_v1_data');
            if (saved) {
                try {
                    mainData = JSON.parse(saved);
                } catch(e) {
                    mainData = JSON.parse(JSON.stringify(initialData));
                }
            } else {
                mainData = JSON.parse(JSON.stringify(initialData));
            }
            renderAll();
        }

        function resetData() {
            if(confirm('모든 데이터를 초기값으로 리셋하시겠습니까? (로컬스토리지 삭제)')) {
                localStorage.removeItem('roro_v1_data');
                location.reload();
            }
        }

        // --- 렌더링 시스템 ---
        function renderAll() {
            // Hero
            document.getElementById('hero-title-1').value = mainData.hero.t1;
            document.getElementById('hero-title-2').value = mainData.hero.t2;
            document.getElementById('hero-desc').value = mainData.hero.desc;
            document.getElementById('hero-img').value = mainData.hero.img;
            document.getElementById('preview-hero').src = mainData.hero.img;

            // About
            document.getElementById('value-1').value = mainData.about.values[0] || "";
            document.getElementById('value-2').value = mainData.about.values[1] || "";
            document.getElementById('value-3').value = mainData.about.values[2] || "";
            document.getElementById('about-text').value = mainData.about.text;

            renderLawyers();
            renderServices();
        }

        function renderLawyers() {
            const list = document.getElementById('lawyer-list');
            list.innerHTML = '';
            mainData.lawyers.forEach((l, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="py-4 w-16">
                        <img src="${l.img}" class="w-10 h-12 object-cover rounded border border-white/10" onerror="this.src='https://via.placeholder.com/100x120?text=No+Img'">
                    </td>
                    <td class="px-3"><input type="text" value="${l.name}" onchange="updateLawyer(${idx}, 'name', this.value)" class="w-full bg-transparent border-none text-white font-bold p-0"></td>
                    <td class="px-3"><input type="text" value="${l.role}" onchange="updateLawyer(${idx}, 'role', this.value)" class="w-full bg-transparent border-none text-xs text-gray-500 p-0"></td>
                    <td class="px-3 text-right">
                        <button onclick="removeLawyer(${idx})" class="text-red-500/30 hover:text-red-500 transition text-[10px] uppercase font-bold tracking-tighter">Delete</button>
                    </td>
                `;
                list.appendChild(tr);
            });
        }

        function renderServices() {
            const container = document.getElementById('services-container');
            container.innerHTML = '';
            mainData.services.forEach((s, idx) => {
                const div = document.createElement('div');
                div.className = "bg-zinc-900/50 p-4 rounded-lg border border-white/5 space-y-2";
                div.innerHTML = `
                    <input type="text" value="${s.title}" onchange="updateService(${idx}, 'title', this.value)" class="text-gold font-bold text-xs bg-transparent border-none w-full p-0 focus:ring-0">
                    <textarea onchange="updateService(${idx}, 'desc', this.value)" class="w-full bg-transparent border-none text-[11px] p-0 text-gray-500 h-10 resize-none leading-tight focus:ring-0">${s.desc}</textarea>
                `;
                container.appendChild(div);
            });
        }

        // --- 업데이트 로직 ---
        function updateHeroPreview(url) { document.getElementById('preview-hero').src = url; }
        function updateLawyer(idx, key, val) { mainData.lawyers[idx][key] = val; }
        function updateService(idx, key, val) { mainData.services[idx][key] = val; }
        
        function addLawyerRow() {
            mainData.lawyers.push({ name: "New Lawyer", role: "직책 입력", img: "https://via.placeholder.com/200", desc: "" });
            renderLawyers();
        }

        function removeLawyer(idx) {
            mainData.lawyers.splice(idx, 1);
            renderLawyers();
        }

        // --- 저장 로직 (LocalStorage Test) ---
        function saveMainContent() {
            const btn = document.getElementById('save-btn');
            const txt = document.getElementById('save-text');

            // 1. DOM 데이터를 데이터 객체에 최종 동기화
            mainData.hero.t1 = document.getElementById('hero-title-1').value;
            mainData.hero.t2 = document.getElementById('hero-title-2').value;
            mainData.hero.desc = document.getElementById('hero-desc').value;
            mainData.hero.img = document.getElementById('hero-img').value;

            mainData.about.values = [
                document.getElementById('value-1').value,
                document.getElementById('value-2').value,
                document.getElementById('value-3').value
            ];
            mainData.about.text = document.getElementById('about-text').value;

            // 2. 로컬스토리지 저장
            try {
                localStorage.setItem('roro_v1_data', JSON.stringify(mainData));
                
                // 3. UI 피드백 (테스트 완료 표시)
                btn.classList.add('btn-saved');
                txt.innerText = '저장 완료!';
                btn.classList.replace('bg-gold', 'bg-white');
                
                setTimeout(() => {
                    btn.classList.remove('btn-saved');
                    txt.innerText = '설정 저장';
                    btn.classList.replace('bg-white', 'bg-gold');
                }, 1500);

            } catch(e) {
                alert('저장 용량 초과 또는 브라우저 보안 설정으로 인해 저장이 실패했습니다.');
            }
        }

        // --- 탭 제어 ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-view').forEach(v => v.classList.add('hidden'));
            document.getElementById('view-' + tabId).classList.remove('hidden');
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active', 'text-black', 'text-gray-400'));
            const activeTab = document.getElementById('tab-' + tabId);
            activeTab.classList.add('active', 'text-black');
        }

        // 윈도우 로드 시 실행
        window.onload = init;
    </script>
</body>
</html>
